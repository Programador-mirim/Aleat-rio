<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Controle de Produtos & Estoque — Painel</title>
  <meta name="description" content="Interface profissional para cadastro de produtos, gestão de estoque e relatórios." />
  <style>
    /* ===== Reset simples ===== */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; color:#0f172a;background:#f6f8fb}

    /* ===== Layout ===== */
    .container{max-width:1200px;margin:28px auto;padding:20px}
    header{background:#ffffff;border-radius:14px;padding:14px 20px;display:flex;align-items:center;gap:16px;box-shadow:0 6px 20px rgba(18,38,63,0.06)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#4f46e5,#06b6d4);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    nav{margin-left:12px;display:flex;gap:12px}
    nav a{padding:8px 12px;border-radius:10px;color:#334155;text-decoration:none;font-weight:600}
    nav a.active{background:#eef2ff;color:#3730a3}

    .header-right{margin-left:auto;display:flex;align-items:center;gap:12px}
    .search{position:relative}
    .search input{padding:8px 12px 8px 36px;border-radius:10px;border:1px solid #e6edf3;background:#f8fafc;width:280px}
    .search svg{position:absolute;left:8px;top:8px;opacity:.5}
    .btn{background:#0ea5a4;color:#fff;padding:8px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .btn.ghost{background:transparent;color:#0f172a;border:1px solid #e6edf3}

    main{display:grid;grid-template-columns:360px 1fr;gap:20px;margin-top:18px}

    /* ===== Sidebar ===== */
    .sidebar{background:#fff;padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(18,38,63,0.04);height:fit-content}
    .profile{display:flex;align-items:center;gap:12px}
    .avatar{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#fb7185,#f97316);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .stats{display:flex;gap:10px;margin-top:14px}
    .stat{flex:1;background:#f8fafc;padding:10px;border-radius:10px;text-align:center}
    .filters{margin-top:16px;display:flex;flex-direction:column;gap:8px}
    .filters button{padding:8px;border-radius:8px;border:1px solid #e6edf3;background:transparent;cursor:pointer}

    /* ===== Workspace ===== */
    .workspace{display:flex;flex-direction:column;gap:16px}
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .card{background:#fff;padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(18,38,63,0.04)}
    .card h3{font-size:14px;color:#334155;margin-bottom:8px}
    .card p{color:#64748b;font-size:12px}

    /* ===== Products & Table ===== */
    .toolbar{display:flex;align-items:center;gap:12px}
    .table-wrap{background:#fff;padding:12px;border-radius:12px;box-shadow:0 6px 20px rgba(18,38,63,0.04)}
    table{width:100%;border-collapse:collapse}
    thead th{font-size:12px;text-align:left;padding:10px 8px;color:#475569;border-bottom:1px solid #f1f5f9}
    tbody td{padding:10px 8px;border-bottom:1px solid #f8fafc;color:#0f172a}
    .badge{display:inline-block;padding:6px 8px;border-radius:999px;font-weight:700;font-size:12px}
    .badge.low{background:#fff7ed;color:#c2410c;border:1px solid #fde8cf}
    .badge.ok{background:#f0fdf4;color:#065f46;border:1px solid #bbf7d0}
    .actions button{margin-right:6px;padding:6px 8px;border-radius:8px;border:1px solid #e6edf3;background:transparent;cursor:pointer}

    /* ===== Modal ===== */
    .modal{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.show{display:flex}
    .modal-card{background:#fff;padding:20px;border-radius:12px;max-width:640px;width:100%;box-shadow:0 20px 60px rgba(2,6,23,0.3)}
    .form-row{display:flex;gap:8px}
    .form-row .field{flex:1;display:flex;flex-direction:column;gap:6px}
    .field input, .field select, .field textarea{padding:10px;border-radius:8px;border:1px solid #e6edf3}

    /* ===== Responsive ===== */
    @media (max-width:980px){
      .cards{grid-template-columns:repeat(2,1fr)}
      main{grid-template-columns:1fr}
      .search input{width:160px}
    }
    @media (max-width:640px){
      .cards{grid-template-columns:1fr}
      .logo{display:none}
      nav{display:none}
      .search input{width:120px}
    }

    /* small helpers */
    .muted{color:#64748b;font-size:13px}
    .right{margin-left:auto}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">PD</div>
        <div>
          <div style="font-weight:800">Painel Farma - Estoque</div>
          <div class="muted">Painel de controle • Produtos • Estoque • Relatórios</div>
        </div>
      </div>

      <nav>
        <a href="#" class="active">Dashboard</a>
        <a href="#produtos">Produtos</a>
        <a href="#estoque">Estoque</a>
        <a href="#relatorios">Relatórios</a>
      </nav>

      <div class="header-right">
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="q" placeholder="Pesquisar produtos, lote, categoria..." />
        </div>

        <button class="btn" id="addBtn">+ Novo Produto</button>
        <button class="btn ghost">Exportar</button>
        <div style="display:flex;align-items:center;gap:10px">
          <div class="avatar">SC</div>
        </div>
      </div>
    </header>

    <main>
      <aside class="sidebar">
        <div class="profile">
          <div class="avatar">SC</div>
          <div>
            <div style="font-weight:800">Sammy Calebe</div>
            <div class="muted">Administrador</div>
          </div>
        </div>

        <div class="stats">
          <div class="stat">
            <div style="font-weight:800">1.254</div>
            <div class="muted" style="font-size:12px">Produtos</div>
          </div>
          <div class="stat">
            <div style="font-weight:800">237</div>
            <div class="muted" style="font-size:12px">Baixo estoque</div>
          </div>
        </div>

        <div class="filters">
          <button onclick="filterStatus('all')">Todos</button>
          <button onclick="filterStatus('ok')">Disponíveis</button>
          <button onclick="filterStatus('low')">Baixo estoque</button>
          <button onclick="filterStatus('expired')">Vencidos</button>
        </div>
      </aside>

      <section class="workspace">
        <div class="cards">
          <div class="card">
            <h3>Visão Geral</h3>
            <p class="muted">Resumo rápido de estoque, produtos e alertas.</p>
            <div style="display:flex;gap:8px;margin-top:12px;align-items:center">
              <div style="flex:1">
                <div style="font-weight:800;font-size:18px">1.254</div>
                <div class="muted">Itens cadastrados</div>
              </div>
              <div style="flex:1">
                <div style="font-weight:800;font-size:18px">237</div>
                <div class="muted">Estoque crítico</div>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Movimentações</h3>
            <p class="muted">Últimas entradas e saídas registradas.</p>
            <ul class="muted" style="margin-top:8px;list-style:none;padding-left:0">
              <li>+ 50 - Entrada: Paracetamol (Lote: A12)</li>
              <li>- 8 - Saída: Amoxicilina (FARM123)</li>
            </ul>
          </div>

          <div class="card">
            <h3>Relatórios</h3>
            <p class="muted">Gerar relatórios mensais e exportar CSV/PDF.</p>
            <div style="margin-top:10px"><button class="btn">Gerar relatório</button></div>
          </div>
        </div>

        <div class="table-wrap" id="produtos">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
            <div class="toolbar">
              <strong>Produtos</strong>
              <div class="muted" style="margin-left:8px">Lista de produtos e controle de estoque</div>
            </div>
            <div>
              <label class="muted">Ordenar por</label>
              <select id="sortBy" onchange="applySort()">
                <option value="name">Nome</option>
                <option value="qty">Quantidade</option>
                <option value="exp">Data de venc.</option>
              </select>
            </div>
          </div>

          <table>
            <thead>
              <tr>
                <th>Produto</th>
                <th>Categoria</th>
                <th>Quantidade</th>
                <th>Lote</th>
                <th>Vencimento</th>
                <th>Status</th>
                <th style="text-align:right">Ações</th>
              </tr>
            </thead>
            <tbody id="table-body">
              <!-- Linhas geradas por JS -->
            </tbody>
          </table>
        </div>

      </section>
    </main>

    <!-- Modal: Adicionar produto -->
    <div class="modal" id="modal">
      <div class="modal-card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <h3>Adicionar / Editar Produto</h3>
          <button onclick="closeModal()" class="btn ghost">Fechar</button>
        </div>

        <form id="productForm">
          <div class="form-row">
            <div class="field">
              <label>Nome do produto</label>
              <input name="name" required />
            </div>
            <div class="field">
              <label>Categoria</label>
              <input name="category" />
            </div>
          </div>

          <div class="form-row" style="margin-top:8px">
            <div class="field">
              <label>Quantidade</label>
              <input type="number" name="qty" min="0" required />
            </div>
            <div class="field">
              <label>Lote</label>
              <input name="batch" />
            </div>
            <div class="field">
              <label>Vencimento</label>
              <input type="date" name="exp" />
            </div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
            <button type="button" class="btn ghost" onclick="closeModal()">Cancelar</button>
            <button class="btn" type="submit">Salvar produto</button>
          </div>
        </form>
      </div>
    </div>

  </div>

  <script>
    /* ===== Dados de exemplo ===== */
    const seed = [
      {id:1,name:'Paracetamol 500mg',category:'Analgesico',qty:120,batch:'A12',exp:'2025-11-30'},
      {id:2,name:'Amoxicilina 250mg',category:'Antibiótico',qty:6,batch:'B73',exp:'2024-05-10'},
      {id:3,name:'Vitamina C 500mg',category:'Suplemento',qty:340,batch:'C21',exp:'2026-02-05'},
      {id:4,name:'Insulina NPH',category:'Endócrino',qty:2,batch:'D99',exp:'2024-01-15'},
      {id:5,name:'Omeprazol 20mg',category:'Gastro',qty:60,batch:'E07',exp:'2025-09-20'}
    ];

    let products = [...seed];
    const tbody = document.getElementById('table-body');
    const modal = document.getElementById('modal');
    const form = document.getElementById('productForm');
    const addBtn = document.getElementById('addBtn');
    const queryInput = document.getElementById('q');

    function formatDate(d){ if(!d) return '-'; const dt=new Date(d); return dt.toLocaleDateString('pt-BR'); }

    function statusOf(p){
      const today = new Date();
      if(p.exp){
        const ex = new Date(p.exp+'T00:00:00');
        if(ex < today) return {label:'Vencido',cls:'low'};
      }
      if(p.qty<=5) return {label:'Crítico',cls:'low'};
      return {label:'OK',cls:'ok'};
    }

    function render(){
      tbody.innerHTML='';
      for(const p of products){
        const st = statusOf(p);
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><strong>${p.name}</strong><div class='muted' style='font-size:12px'>ID: ${p.id}</div></td>
          <td>${p.category||'-'}</td>
          <td>${p.qty}</td>
          <td>${p.batch||'-'}</td>
          <td>${formatDate(p.exp)}</td>
          <td><span class='badge ${st.cls}'>${st.label}</span></td>
          <td style='text-align:right' class='actions'>
            <button onclick='editProduct(${p.id})'>Editar</button>
            <button onclick='removeProduct(${p.id})'>Excluir</button>
          </td>`;
        tbody.appendChild(tr);
      }
    }

    function openModal(){ modal.classList.add('show'); }
    function closeModal(){ modal.classList.remove('show'); form.reset(); form.dataset.editId=''; }

    addBtn.addEventListener('click', ()=>{ openModal(); });

    form.addEventListener('submit', (ev)=>{
      ev.preventDefault();
      const fd = new FormData(form);
      const obj = Object.fromEntries(fd.entries());
      obj.qty = Number(obj.qty)||0;
      if(form.dataset.editId){
        const id = Number(form.dataset.editId);
        const i = products.findIndex(p=>p.id===id);
        products[i] = {...products[i],...obj};
      } else {
        const id = products.length?Math.max(...products.map(p=>p.id))+1:1;
        products.push({...obj,id});
      }
      closeModal(); render();
    });

    function editProduct(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      form.name.value = p.name; form.category.value=p.category; form.qty.value=p.qty; form.batch.value=p.batch; form.exp.value=p.exp||'';
      form.dataset.editId = id;
      openModal();
    }

    function removeProduct(id){
      if(!confirm('Confirma exclusão do produto?')) return;
      products = products.filter(p=>p.id!==id);
      render();
    }

    function filterStatus(mode){
      if(mode==='all'){ products = [...seed]; render(); return; }
      if(mode==='ok'){ products = [...seed].filter(p=>statusOf(p).label==='OK'); render(); return; }
      if(mode==='low'){ products = [...seed].filter(p=>statusOf(p).label==='Crítico'); render(); return; }
      if(mode==='expired'){ products = [...seed].filter(p=>statusOf(p).label==='Vencido'); render(); return; }
    }

    queryInput.addEventListener('input', ()=>{
      const q = queryInput.value.toLowerCase().trim();
      products = seed.filter(p=>[p.name,p.category,p.batch,(p.id+'')].join(' ').toLowerCase().includes(q));
      render();
    });

    function applySort(){
      const v = document.getElementById('sortBy').value;
      if(v==='name') products.sort((a,b)=>a.name.localeCompare(b.name));
      if(v==='qty') products.sort((a,b)=>b.qty-a.qty);
      if(v==='exp') products.sort((a,b)=> (a.exp||'9999') > (b.exp||'9999')?1:-1 );
      render();
    }

    // inicializa
    render();

    // fechar modal com tecla ESC
    window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });
  </script>
</body>
</html>
